<html>

<head>
    <meta charset="utf-8">
    <title>Invoice</title>

    <style>
        #navigation {
            font-family: sans-serif;
            background-color: #f1f1f1;
            z-index: 200;
            border-bottom: 1px solid #dfdfdf;
            left: 0;
            right: 0;
            bottom: 0;
            position: fixed;
            padding: 6px 8px;
            text-align: right;
        }
        
        #navigation .button {
            transition-property: border, background, color;
            display: inline-block;
            font-size: 13px;
            line-height: 26px;
            height: 28px;
            margin: 0;
            padding: 0 10px 1px;
            cursor: pointer;
            border-width: 1px;
            border-style: solid;
            -webkit-border-radius: 3px;
            -webkit-appearance: none;
            border-radius: 3px;
            white-space: nowrap;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            background: #2ea2cc;
            border-color: #0074a2;
            -webkit-box-shadow: inset 0 1px 0 rgba(120, 200, 230, 0.5), 0 1px 0 rgba(0, 0, 0, .15);
            box-shadow: inset 0 1px 0 rgba(120, 200, 230, 0.5), 0 1px 0 rgba(0, 0, 0, .15);
            color: #fff;
            text-decoration: none;
        }
        
        #navigation .button:hover,
        #navigation .button:focus {
            background: #1e8cbe;
            border-color: #0074a2;
            -webkit-box-shadow: inset 0 1px 0 rgba(120, 200, 230, 0.6);
            box-shadow: inset 0 1px 0 rgba(120, 200, 230, 0.6);
            color: #fff;
        }
        
        #navigation .button:active {
            background: #1b7aa6;
            border-color: #005684;
            color: rgba(255, 255, 255, 0.95);
            -webkit-box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.1);
        }
        
        .centeredd {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }
        
        .centeredd img {
            text-align: center;
            width: 180px;
        }
        
        #thanks {}
        
        @media print {
            #navigation {
                display: none;
            }
        }
    </style>
    <link rel="stylesheet" href="https://homeone.gr/wp-content/plugins/woocommerce-delivery-notes/templates/print-order/style.css" type="text/css" media="screen,print">
</head>

<body class="invoice">

    <div id="container">

        <div id="navigation" style="display: none;">
            <a href="#" class="button" onclick="window.print();return false;">Print</a>
        </div>
        <!-- #navigation -->

        <div id="page">
            <article class="content">
                <div class="order-invoice">
                    <div class="order-branding">
                        <div class="company-logo">
                            <img id='shopLogo' style="float: right;" src="0" width="150" height="150" alt="Homeone.gr">
                        </div>
                    </div>

                    <div class="order-addresses no-shipping-address">
                        <div class="billing-address">
                            <h3>Διεύθυνση</h3>
                            <address>
                                <span id="client_name"></span><br>
                                <span id="client_address"></span><br>
                                <span id="client_perioxi"></span><br>
                                <span id="client_perifereia"></span><br>
                                <span id="client_zip"></span><br>
                            </address>
                        </div>
                    </div>
                    <!-- .order-addresses -->


                    <div class="order-info">
                        <h2 style="font-size: 3.5em;">Invoice <span class="order_id">#</span></h2>

                        <ul class="info-list">
                            <li>
                                <strong>Order Number</strong>
                                <span class="order_id"></span>
                            </li>
                            <li>
                                <strong>Order Date</strong>
                                <span id="order_date"></span>
                            </li>
                            <li>
                                <strong>Payment Method</strong>
                                <span><span id="payment_method" class="wc_payment_method-title"></span></span>
                            </li>
                            <li>
                                <strong>Email</strong>
                                <span id="client_email">m</span>
                            </li>
                            <li>
                                <strong>Telephone</strong>
                                <span id="client_phone"></span>
                            </li>
                        </ul>

                    </div>
                    <!-- .order-info -->


                    <div class="order-items">
                        <table>
                            <thead>
                                <tr>
                                    <th class="head-name"><span>Product</span></th>
                                    <th class="head-item-price"><span>Price</span></th>
                                    <th class="head-quantity"><span>Quantity</span></th>
                                    <th class="head-price"><span>Total</span></th>
                                </tr>
                            </thead>

                            <tbody id="products_here">
                            </tbody>

                            <tfoot>
                                <tr>
                                    <td class="total-name"><span>Υποσύνολο</span></td>
                                    <td class="total-item-price"></td>
                                    <td class="total-quantity"></td>
                                    <td class="total-price"><span><span id="order_subtotal"
                                                class="woocommerce-Price-amount amount">&nbsp;<span
                                                    class="woocommerce-Price-currencySymbol">€</span></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="total-name"><span>Χρέωση Αντικαταβολής</span></td>
                                    <td class="total-item-price"></td>
                                    <td class="total-quantity"></td>
                                    <td class="total-price"><span><span id="order_extra"
                                                class="woocommerce-Price-amount amount">&nbsp;<span
                                                    class="woocommerce-Price-currencySymbol">€</span></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="total-name"><span>Αποστολή</span></td>
                                    <td class="total-item-price"></td>
                                    <td class="total-quantity"></td>
                                    <td class="total-price"><span><span id="order_shipping"
                                                class="woocommerce-Price-amount amount">&nbsp;<span
                                                    class="woocommerce-Price-currencySymbol">€</span></span>&nbsp;<small class="shipped_via">μέσω Μεταφορικά</small></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="total-name"><span>Σύνολο</span></td>
                                    <td class="total-item-price"></td>
                                    <td class="total-quantity"></td>
                                    <td class="total-price"><span><span id="order_total"
                                                class="woocommerce-Price-amount amount">&nbsp;<span
                                                    class="woocommerce-Price-currencySymbol">€</span></span>
                                        </span>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>

                    </div>
                    <!-- .order-items -->

                    <div id='comment_div' style="display: none;" class="order-notes">
                        <h4>Σχόλιο πελάτη</h4>
                        <p id="order_comment"></p>
                    </div>
                    <div class="centeredd" style="padding-top: 50px;" id="qrcode">
                    </div>
                    <div id="invoice_end"></div>
                    <!-- .order-notes -->
                </div>
                <div id="thanks">
                    <div class="thank-you">
                        <section>
                            <h2>Ευχαριστούμε για την παραγγελία σας!</h2>
                            <p>
                                Η παραγγελία σας με κωδικό <span id='orderid'>54343</span> ειναι εδώ!
                            </p>
                            <p>
                                Με εκτίμηση,<br> η ομάδα του <span id="shop">Homeone</span>
                            </p>

                        </section>
                        <hr>
                        <section>

                            <h2>Φόρμα Επιστροφής</h2>
                            <p> <b>Βήματα επιστροφής προϊόντων:</b> <br>Παρακαλώ, διαβάστε αναλυτικά τους όρους και προϋποθέσεις επιστροφών στην ιστοσελίδα του καταστήματος. <br> Συμπληρώστε την παρακάτω φόρμα όσο το δυνατόν πληρέστερα για την καλύτερη εξυπηρέτησή
                                σας. <br> Εσωκλείστε οπωσδήποτε τα προϊόντα μαζί με αυτή τη φόρμα. Στείλτε το δέμα στην διεύθυνση αποστολής που αναγράφεται στο κάτω μέρος της φόρμας. <br> Τα προϊόντα θα πρέπει να είναι στην αρχική τους κατάσταση και συσκευασμένα
                                σωστά, για να γίνει δεκτή η επιστροφή τους. </p>
                            <p>&nbsp;</p>
                            <table>
                                <tbody>
                                    <tr>
                                        <td colspan="1"><span>Αριθμός Παραγγελίας:</span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span>Ονοματεπώνυμο:</span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1"><span>Ημερομηνία Επιστροφής:</span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span>Ημερομηνία Παραγγελίας:</span></td>
                                        <td colspan="1"><span></span></td>
                                        <td colspan="1"><span></span></td>
                                    </tr>
                                    <tr>

                                        <td colspan="7"><span> <br><b>Προϊόντα Επιστροφής</b></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="1"><span>Κωδικός (SKU):</span></td>
                                        <td colspan="4"><span>Όνομα:</span></td>
                                        <td colspan="1"><span>Ποσότητα:</span></td>
                                        <td colspan="1"><span>*Αιτία Επιστροφής:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1"><span>Κωδικός (SKU):</span></td>
                                        <td colspan="4"><span>Όνομα:</span></td>
                                        <td colspan="1"><span>Ποσότητα:</span></td>
                                        <td colspan="1"><span>*Αιτία Επιστροφής:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1"><span>Κωδικός (SKU):</span></td>
                                        <td colspan="4"><span>Όνομα:</span></td>
                                        <td colspan="1"><span>Ποσότητα:</span></td>
                                        <td colspan="1"><span>*Αιτία Επιστροφής:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1"><span>Κωδικός (SKU):</span></td>
                                        <td colspan="4"><span>Όνομα:</span></td>
                                        <td colspan="1"><span>Ποσότητα:</span></td>
                                        <td colspan="1"><span>*Αιτία Επιστροφής:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="7">
                                            <br>
                                            <p><b>Κατάλογος αιτίων της επιστροφής: </b><br><br><b>1</b>: Δεν Ικανοποιεί Τις Απαιτήσεις Μου,&nbsp;&nbsp;
                                                <b>2</b>: Λανθασμένη Παραγγελία,&nbsp;&nbsp; <b>3</b>:Ελαττωματικό Προϊόν,&nbsp;&nbsp;
                                                <b>4</b>: Λανθασμένο Προϊόν,&nbsp;&nbsp;
                                                <b>5</b>: Άλλο*
                                            </p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="7">*Εξηγήστε:</td>
                                    </tr>
                                    <tr>
                                        <td colspan="7"><span> <br><b>Επιστροφή Χρημάτων</b></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><span>Τράπεζα:</span></td>
                                        <td colspan="5"><span>Όνομα Δικαιούχου:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="7"><span>Αριθμός IBAN:</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="7"><span> <br><b>Διεύθυνση Επιστροφής</b></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="7"><span>E-SALES MONOPROSOPI IKE, ΑΛΙΣΣΟΣ, 25222</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>





                    </div>
                </div>
            </article>
            <!-- .content -->






        </div>
        <!-- #page -->


    </div>
    <!-- #container -->


    <script src="qrcodejs/qrcode.min.js"></script>
    <script>
        function logoPicker(shop) {
            if (shop == 'homeone') {
                return 'https://homeone.gr/wp-content/uploads/sites/8/2020/05/homeoneSquare.png'
            } else if (shop == 'familystore') {
                return 'https://familystore.gr/wp-content/uploads/2019/09/family-store-logo.jpg'
            } else if (shop == 'kidstoys') {
                return 'https://kidstoys.gr/wp-content/uploads/sites/7/2020/06/logokidstoys1print.jpg'
            }
        }

        function decipherData() {
            let data = window.location.href.split('?')[1];
            data = JSON.parse(decodeURI(data));
            return data
        }

        function main() {
            let data = decipherData();
            populateData(data);

            console.log(data);
            let b = calculateDistance('#invoice_end');
            console.log(b);
            b = 1385 - b;
            console.log(b);
            b = b.toString() + 'px';
            console.log(b);
            document.querySelector('#thanks').style.paddingTop = b;
            window.print();
            window.addEventListener('afterprint', function(event) {
                window.close();
            });
            // let b = populate();
            // if (b > 0) {
            //     printIt();
            // }
        }

        function createProductRow(name, sku, price, quantity) {
            let row = document.createElement('tr');
            let total = parseFloat(price) * parseFloat(quantity);
            total = total.toFixed(2);
            let inner = ` <td class="product-name">
                                        <span class="name">
								PROD_NAME									</span>

                                        <br>
                                        <dl class="extras">


                                            <dt>SKU:</dt>
                                            <dd>PROD_SKU</dd>

                                        </dl>
                                    </td>
                                    <td class="product-item-price">
                                        <span><span class="woocommerce-Price-amount amount">PROD_PRICE&nbsp;<span class="woocommerce-Price-currencySymbol">€</span></span>
                                        </span>
                                    </td>
                                    <td class="product-quantity">
                                        <span>PROD_QUANTITY</span>
                                    </td>
                                    <td class="product-price">
                                        <span><span class="woocommerce-Price-amount amount">PROD_TOTAL&nbsp;<span class="woocommerce-Price-currencySymbol">€</span></span>
                                        </span>
                                    </td>`;
            inner = inner.replace('PROD_NAME', name);
            inner = inner.replace('PROD_SKU', sku.toString());
            inner = inner.replace('PROD_PRICE', price.toString());
            inner = inner.replace('PROD_QUANTITY', quantity.toString());
            inner = inner.replace('PROD_TOTAL', total.toString());
            row.innerHTML = inner;
            return row
        }

        function populateData(data) {
            let logo = logoPicker(data.shop)
            document.querySelector('#shopLogo').src = logo + '?v2';
            document.querySelector('#client_name').innerText = data.client.name;
            document.querySelector('#client_address').innerText = data.client.address;
            document.querySelector('#client_perioxi').innerText = data.client.perioxi;
            document.querySelector('#client_perifereia').innerText = data.client.perifereia;
            document.querySelector('#client_zip').innerText = data.client.zip;
            Array.from(document.querySelectorAll('.order_id')).forEach(function(el) {
                el.innerText = '#' + data.orderid;
            })
            document.querySelector('#client_phone').innerText = data.client.phone;
            document.querySelector('#client_email').innerText = data.client.email;
            document.querySelector('#payment_method').innerText = data.payment;
            document.querySelector('#order_date').innerText = data.date;
            Array.from(data.products).forEach(function(product) {
                let temp = createProductRow(product.name, product.sku, product.price, product.quantity);
                document.querySelector('#products_here').appendChild(temp);
            });
            document.querySelector('#order_total').innerText = data.total + ' €';
            document.querySelector('#order_subtotal').innerText = data.subtotal + ' €';
            document.querySelector('#order_shipping').innerText = data.shipping + ' €';
            document.querySelector('#order_extra').innerText = data.extra + ' €';
            if (data.comment != '') {
                document.querySelector('#order_comment').innerText = data.comment;
                document.querySelector('#comment_div').style.display = 'block';
            }
            let qrvalues = 'sh=' + data.shop + "&id=" + data.orderid;
            new QRCode(document.getElementById("qrcode"), qrvalues);


        }

        function printIt() {
            // window.print();
        }

        function populate() {
            let queryString = window.location.search;
            let urlParams = new URLSearchParams(queryString);
            let shop = urlParams.get('shop');
            console.log(shop);
            let orderid = urlParams.get('orderid');
            console.log(orderid);
            let tv = urlParams.get('tv');
            console.log(tv);
            if (orderid != null && shop != null) {
                document.getElementById('shop').innerText = shop;
                document.getElementById('orderid').innerText = orderid;
                document.getElementById('orderid-form').innerText = orderid;
                return 1
            } else {
                return 0
            }
        }

        function calculateDistance(query) {
            var elem = document.querySelector(query);
            var distance = 0;
            do {
                distance += elem.offsetTop;
                elem = elem.offsetParent;

            } while (elem);
            distance = distance < 0 ? 0 : distance;
            return distance
        }

        function docReady(fn) {
            if (document.readyState === "complete" || document.readyState === "interactive") {
                setTimeout(fn, 1);
            } else {
                document.addEventListener("DOMContentLoaded", fn);
            }
        }
        docReady(main);
    </script>
</body>

</html>